// Baseline skills

new entry "Vamp_Claws"
type "SpellData"
data "SpellType" "Target"
using "Target_Claws"
data "SpellProperties" ""
data "SpellSuccess" "DealDamage(max(1d4),Slashing)"
data "DisplayName" "hf0329964ga2d7g4d80gbc4eg7731d21131e5"
data "TooltipDamageList" "DealDamage(1d4,Slashing)"
data "TargetConditions" "not Self() and not Dead()"
data "UseCosts" "ActionPoint:1"

new entry "Vamp_Claws_Grapple"
type "SpellData"
data "SpellType" "Target"
using "Target_Claws"
data "SpellRoll" "ShoveCheck()"
data "SpellSuccess" "ApplyStatus(RESTRAINED,100,2);ApplyStatus(SELF, Vamp_Grapple,100,1)"
data "DisplayName" "hd5951139g56f7g4643g8ae5g5c080d3b9378"
data "Description" "h61b948ffg3761g4b95gbc9ag132c338931da"
data "TooltipDamageList" ""
data "TargetConditions" "not Self() and not Dead() and CanShoveWeight() and IsMovable() and not Grounded() and not Tagged('GASEOUS_FORM') and not (not Player(context.Source) and Combat(context.Source) and Character() and not (Enemy() or HasStatus('SG_Unconscious'))) and not Tagged('CANT_SHOVE_THROW')"

new entry "Vamp_Bite"
type "SpellData"
data "SpellType" "Target"
using "Target_VampireBite_Astarion"
data "Cooldown" "OncePerTurn"
data "SpellProperties" ""
data "SpellRoll" "Attack(AttackType.MeleeSpellAttack)"
data "SpellSuccess" "DealDamage(1d6+DexterityModifier, Piercing);DealDamage(1d4, Necrotic);ApplyStatus(Vamp_LIFE_DRAIN,100,-1);TARGET:IF(SizeEqualOrGreater(Size.Small) and not Tagged('HUMANOID')):RestoreResource(SELF, Vamp_BloodPool,1,0);TARGET:IF(Tagged('HUMANOID')):RestoreResource(SELF, Vamp_BloodPool,2,0);TARGET:IF((not Dead() and not Tagged('REALLY_GALE') and not (Tagged('REALLY_KARLACH') and not Tagged('KARLACH_CAN_TOUCH')))):RegainHitPoints(SELF, 1d4);TARGET:IF((Dead() or Tagged('REALLY_GALE'))):ApplyStatus(SELF, POISONED, 100, 3); TARGET:IF((Tagged('REALLY_KARLACH') and not Tagged('KARLACH_CAN_TOUCH') and not Dead())):ApplyStatus(SELF, BURNING, 100, 3);"
data "TargetConditions" "not Self() and not Item() and not Tagged('UNDEAD') and not Tagged('PLANT') and not Tagged('ELEMENTAL') and not Tagged('CONSTRUCT') and not Tagged('OOZE') and not HasStatus('SG_Petrified',context.Target) and (HasStatus('SG_Stunned',context.Target) or HasStatus('SG_Unconscious',context.Target) or HasStatus('SG_Prone',context.Target) or HasStatus('SG_Sleeping',context.Target) or HasStatus('HIDEOUS_LAUGHTER',context.Target) or HasStatus('SG_Charmed',context.Target) or HasStatus('SG_Incapacitated',context.Target) or HasStatus('SG_Restrained',context.Target))"
data "Description" "h09ae6612gf871g4d05g8e5eg55731e37adef"
data "ExtraDescription" ""
data "DescriptionParams" "RegainHitPoints(1d4);DealDamage(1d6+DexterityModifier,Piercing);DealDamage(1d4,Necrotic);"
data "TooltipDamageList" "DealDamage(1d6+DexterityModifier,Piercing);DealDamage(1d4,Necrotic);"
data "TooltipAttackSave" "MeleeSpellAttack"
data "TooltipStatusApply" ""
data "UseCosts" "ActionPoint:1"

// new entry "test_remove"
// type "SpellData"
// data "SpellType" "Target"
// using "Target_MainHandAttack"
// data "UseCosts" "Vamp_BloodPool:1"

//Blood Features

new entry "Shout_SelectBloodFeatures"
type "SpellData"
data "SpellType" "Shout"
data "ContainerSpells" "Shout_SelectAgonizing_Bite;Shout_SelectBeguilingGaze;Shout_SelectDrainingBite;"
data "TargetConditions" "Self()"
data "Icon" "GenericIcon_DamageType_Necrotic"
data "DisplayName" "h139819ecgf6b5g42bdg974fg71e23e9f4d51"
data "Description" "h139819ecgf6b5g42bdg974fg71e23e9f4d51"
data "ExtraDescription" ""
data "CastTextEvent" "Cast"
data "UseCosts" "Vamp_BloodFeature:1"
data "SpellAnimation" ""
data "VerbalIntent" "Utility"
data "SpellFlags" "IsLinkedSpellContainer"

//for individual shouts do IF(ClassLevelHigherOrEqualThan(x,'Vampire'):Apply the correct stat. If less then do IF(not ClassLevelHigherOrEqualThan(x,'Vampire')):RestoreResource(SELF, Vamp_BloodFeature,y,0)
//IF(not ClassLevelHigherOrEqualThan(4,'Druid')):ApplyStatus(WILDSHAPE_BADGER_PLAYER,100,-1);IF(ClassLevelHigherOrEqualThan(4,'Druid') and not ClassLevelHigherOrEqualThan(6,'Druid')):ApplyStatus(WILDSHAPE_BADGER_PLAYER_4,100,-1);IF(ClassLevelHigherOrEqualThan(6,'Druid') and not ClassLevelHigherOrEqualThan(8,'Druid')):ApplyStatus(WILDSHAPE_BADGER_PLAYER_6,100,-1);IF(ClassLevelHigherOrEqualThan(8,'Druid') and not ClassLevelHigherOrEqualThan(10,'Druid')):ApplyStatus(WILDSHAPE_BADGER_PLAYER_8,100,-1);IF(ClassLevelHigherOrEqualThan(10,'Druid')and not ClassLevelHigherOrEqualThan(12,'Druid')):ApplyStatus(WILDSHAPE_BADGER_PLAYER_10,100,-1);IF(ClassLevelHigherOrEqualThan(12,'Druid')):ApplyStatus(WILDSHAPE_BADGER_PLAYER_12,100,-1)

//No Req

new entry "Shout_SelectAgonizing_Bite"
type "SpellData"
data "SpellType" "Shout"
using "Shout_SelectBloodFeatures"
data "SpellContainerID" "Shout_SelectBloodFeatures"
data "ContainerSpells" ""
data "SpellProperties" "ApplyStatus(Vamp_StatusAgonizingBite,100,-1)"
data "Icon" "Action_VampireBite"
data "DisplayName" "hbfbaa147ge979g42a9g8083gf2db46f454b2"
data "Description" ""
data "DescriptionParams" ""
data "PrepareSound" ""
data "PrepareLoopSound" ""
data "CastSound" "Action_Cast_SecondWind"
data "SpellAnimation" "9122eb08-93f1-4010-a275-f5ae3ec7c76e,,;,,;9fb11cca-02d4-4d2f-955f-2826c0553b17,,;5103d398-d8de-4aa4-9633-db2e1b7f6254,,;5301d674-b7da-47b6-b4cf-2802ba33a9e9,,;,,;86b3cf93-21fb-4a3d-bed9-97d0a567d084,,;,,;,,"
data "SpellFlags" ""
data "PrepareEffect" ""
data "CastEffect" ""

new entry "Vamp_Agonizing_Bite"
type "SpellData"
data "SpellType" "Target"
using "Vamp_Bite"
data "DisplayName" "hbfbaa147ge979g42a9g8083gf2db46f454b2"
data "SpellSuccess" "DealDamage(1d6+DexterityModifier, Piercing);DealDamage(1d4+CharismaModifier, Necrotic);ApplyStatus(Vamp_LIFE_DRAIN,100,-1);TARGET:IF(SizeEqualOrGreater(Size.Small) and not Tagged('HUMANOID')):RestoreResource(SELF, Vamp_BloodPool,1,0);TARGET:IF(Tagged('HUMANOID')):RestoreResource(SELF, Vamp_BloodPool,2,0);TARGET:IF((not Dead() and not Tagged('REALLY_GALE') and not (Tagged('REALLY_KARLACH') and not Tagged('KARLACH_CAN_TOUCH')))):RegainHitPoints(SELF, 1d4+CharismaModifier);TARGET:IF((Dead() or Tagged('REALLY_GALE'))):ApplyStatus(SELF, POISONED, 100, 3); TARGET:IF((Tagged('REALLY_KARLACH') and not Tagged('KARLACH_CAN_TOUCH') and not Dead())):ApplyStatus(SELF, BURNING, 100, 3);"
data "DescriptionParams" "RegainHitPoints(1d4+CharismaModifier);DealDamage(1d6+DexterityModifier,Piercing);DealDamage(1d4+CharismaModifier,Necrotic);"
data "TooltipDamageList" "DealDamage(1d6+DexterityModifier,Piercing);DealDamage(1d4+CharismaModifier,Necrotic);"


new entry "Shout_SelectBeguilingGaze"
type "SpellData"
data "SpellType" "Shout"
using "Shout_SelectBloodFeatures"
data "SpellContainerID" "Shout_SelectBloodFeatures"
data "ContainerSpells" ""
data "SpellProperties" "IF(HasPassive('Vamp_BloodPool2',context.Source)):ApplyStatus(Vamp_StatusBeguilingGaze,100,-1);IF(not HasPassive('Vamp_BloodPool2',context.Source)):ApplyStatus(Vamp_RestoreBloodFeature,100,1)"
data "Icon" "Spell_Enchantment_CharmPerson"
data "DisplayName" "h081f33ecg527ag4357ga6a3gb5cb77f69bff"
data "Description" ""
data "DescriptionParams" ""
data "PrepareSound" ""
data "PrepareLoopSound" ""
data "CastSound" "Action_Cast_SecondWind"
data "SpellAnimation" "9122eb08-93f1-4010-a275-f5ae3ec7c76e,,;,,;9fb11cca-02d4-4d2f-955f-2826c0553b17,,;5103d398-d8de-4aa4-9633-db2e1b7f6254,,;5301d674-b7da-47b6-b4cf-2802ba33a9e9,,;,,;86b3cf93-21fb-4a3d-bed9-97d0a567d084,,;,,;,,"
data "SpellFlags" ""
data "PrepareEffect" ""
data "CastEffect" ""

new entry "Vamp_BeguilingGaze"
type "SpellData"
data "SpellType" "Target"
using "Target_CharmPerson"
data "DisplayName" "h081f33ecg527ag4357ga6a3gb5cb77f69bff"
data "UseCosts" "ActionPoint:1;Vamp_BloodPool:2"
data "RechargeValues" ""
data "MemoryCost" "" 

new entry "Shout_SelectDrainingBite"
type "SpellData"
data "SpellType" "Shout"
using "Shout_SelectBloodFeatures"
data "SpellContainerID" "Shout_SelectBloodFeatures"
data "ContainerSpells" ""
data "SpellProperties" "IF(HasPassive('Vamp_BloodPool2',context.Source)):ApplyStatus(Vamp_StatusDrainingBite,100,-1);IF(not HasPassive('Vamp_BloodPool2',context.Source)):ApplyStatus(Vamp_RestoreBloodFeature,100,1)"
data "Icon" "Action_VampireBite"
data "DisplayName" "h7a3508acga44eg4603g9fb7ge182386402da"
data "Description" ""
data "DescriptionParams" ""
data "PrepareSound" ""
data "PrepareLoopSound" ""
data "CastSound" "Action_Cast_SecondWind"
data "SpellAnimation" "9122eb08-93f1-4010-a275-f5ae3ec7c76e,,;,,;9fb11cca-02d4-4d2f-955f-2826c0553b17,,;5103d398-d8de-4aa4-9633-db2e1b7f6254,,;5301d674-b7da-47b6-b4cf-2802ba33a9e9,,;,,;86b3cf93-21fb-4a3d-bed9-97d0a567d084,,;,,;,,"
data "SpellFlags" ""
data "PrepareEffect" ""
data "CastEffect" ""

new entry "Vamp_Bonus_Bite"
type "SpellData"
data "SpellType" "Target"
using "Vamp_Bite"
data "SpellFlags" "Temporary"
data "UseCosts" "BonusActionPoint:1;Vamp_BloodPool:2"

new entry "Vamp_BonusAgonizing_Bite"
type "SpellData"
data "SpellType" "Target"
using "Vamp_Agonizing_Bite"
data "SpellFlags" "Temporary"
data "UseCosts" "BonusActionPoint:1;Vamp_BloodPool:2"

